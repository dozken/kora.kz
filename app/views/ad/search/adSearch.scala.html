@(ads:List[models.ad.Ad],animal:models.ad.Animal)

@main("Поиск") {


<div class="container сontain">
	<div class="searchbarmargin">@_searchbar()</div>
	@main_filters(animal)
	<div id="search_by_animal">@_filters(animal)</div>
	<div class="col-lg-12 borderbottom">
		@*<h3 id="zqwe">Казахстан / @animal.name</h3>*@
		<hr class="hrcolor">
		<ul class="typelist">
			<li><a id="sortByLowPrice">Сначала дешевые</a></li>
			<li><a id="sortByHighPrice">Сначала дорогие</a></li>
			<li><a id="sortByDate">По свежести объявления</a></li>
		</ul>
	</div>
	<div id="main_div">
    <div id="search_results" class="col-lg-9 pro3 nopaddingright">

	</div>
        <div id="byDateDiv">
        @if(ads!=null) {
            @for(ad <- ads.sortBy(_.publishedDate).reverse) {
                <div class="col-lg-12  pro1 @if(models.ad.Ad.settingByName(ad,"highlight")!=null){highlighted }">@_ad(ad)</div>
            }
        }
        </div>

        <div id="byLowPriceDiv">
        @if(ads!=null) {
            @for(ad <- ads.sortBy(_.priceType.price)) {
                <div class="col-lg-12  pro1 @if(models.ad.Ad.settingByName(ad,"highlight")!=null){highlighted }">@_ad(ad)</div>
            }
        }
        </div>

        <div id="byHighPriceDiv">
        @if(ads!=null) {
            @for(ad <- ads.sortBy(_.priceType.price).reverse) {
                <div class="col-lg-12  pro1 @if(models.ad.Ad.settingByName(ad,"highlight")!=null){highlighted }">@_ad(ad)</div>
            }
        }
        </div>
    </div>
	<div class="col-lg-3 pro2 paddingleft30px nopaddingright"><div class="">@_advertisements()</div></div>
</div>

}
    <script type="text/javascript" src="@routes.Application.javascriptRoutes"></script>
<script>
    $("#byHighPriceDiv" ).hide();
    $("#byLowPriceDiv" ).hide();
    $("#byDateDiv" ).hide();

    $("#search_results" ).html($("#byDateDiv" ).html());

    $("#sortByLowPrice" ).click(function(){

        $("#search_results" ).html($("#byLowPriceDiv" ).html());
    })

    $("#sortByHighPrice" ).click(function(){

    $("#search_results" ).html($("#byHighPriceDiv" ).html());
    })

    $("#sortByDate" ).click(function(){

    $("#search_results" ).html($("#byDateDiv" ).html());
    })

$("#poi").click(function() {
  $("#demo").slideToggle("slow");
  $("#poi span").text(function(i, v) {
	return v === 'Обычный поиск' ? 'Расширенный поиск' : 'Обычный поиск'
  })
});

$(document).on("change",".gender_check",function(){


if ($('.gender_check:checked').length != 1) {


   $("#gender" ).val("");
}
   else {
        if ( this.checked ) {
        $ ( "#gender" ).val ( $ ( this ).val ( ) ) ;
        }else{ $ ( "#gender" ).val ( $ ( this ).attr ("notVal") ) ;}

}


})



$(document ).on("click","#search_filter",function(e){
e.preventDefault();
$("#search_results" ).html('<img src="@routes.Assets.at("images/home/loading.gif")" style="margin-left: 58%;padding: 20px;">');
$(this ).attr("disabled",true);
jsRoutes.controllers.Ads.searchAd().ajax({
data : $ ( "#search_form" ).serialize ( ),
success: function(data) {
$("#main_div" ).html(data);
$("#search_filter" ).attr("disabled",false);
$("#search_results" ).html($("#byDateDiv" ).html());
$("#byHighPriceDiv" ).hide();
$("#byLowPriceDiv" ).hide();
$("#byDateDiv" ).hide();
}
});
})

</script>